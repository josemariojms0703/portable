<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <style>
        /* General Layout */
        #attachment-zone {
            display: flex;
            gap: 15px;
            padding: 20px;
            flex-wrap: wrap;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        }

        /* 1. The Wrapper: Click to open in new tab */
        .attachment-card {
            position: relative;
            width: 140px;
            height: 140px;
            background: #ffffff;
            border: 1px solid #e0e0e0;
            border-radius: 12px;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            text-decoration: none; /* Critical: removes link styling */
            transition: border-color 0.2s, box-shadow 0.2s;
        }

        .attachment-card:hover {
            border-color: #007bff;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        /* Preview Handling */
        .preview-media {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }

        .icon-fallback {
            font-size: 40px;
        }

        /* 2. Filename: Hidden by default (Not displayed on user page) */
        .hover-filename {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.85); /* High contrast for readability */
            color: #ffffff;
            font-size: 11px;
            padding: 8px 4px;
            text-align: center;
            word-break: break-all;
            
            /* Visibility Logic */
            opacity: 0;
            transform: translateY(100%); /* Slides in from bottom */
            transition: opacity 0.2s ease, transform 0.2s ease;
            pointer-events: none; /* Prevents text from blocking clicks */
        }

        /* 3. Display filename ONLY when hovered */
        .attachment-card:hover .hover-filename {
            opacity: 1;
            transform: translateY(0);
        }
    </style>
</head>
<body>

    <div id="attachment-zone">
        </div>

    <script>
        /**
         * Standard function to generate the attachment
         */
        function renderAttachment(fileUrl, fileName, fileType) {
            const container = document.getElementById('attachment-zone');

            // Create the anchor link (Fixed: opens in new tab)
            const link = document.createElement('a');
            link.href = fileUrl;
            link.target = "_blank"; 
            link.rel = "noopener noreferrer"; // Security best practice for new tabs
            link.className = "attachment-card";

            // Create Media Preview
            if (fileType.startsWith('image/')) {
                const img = document.createElement('img');
                img.src = fileUrl;
                img.className = "preview-media";
                link.appendChild(img);
            } else if (fileType.startsWith('video/')) {
                const video = document.createElement('video');
                video.src = fileUrl;
                video.className = "preview-media";
                video.muted = true;
                link.appendChild(video);
            } else {
                // Fallback icon for PDF/Docs
                const icon = document.createElement('span');
                icon.className = "icon-fallback";
                icon.textContent = "ðŸ“„";
                link.appendChild(icon);
            }

            // Create the Hover-only Filename
            const nameOverlay = document.createElement('div');
            nameOverlay.className = "hover-filename";
            nameOverlay.textContent = fileName;

            link.appendChild(nameOverlay);
            container.appendChild(link);
        }

        // --- TEST DATA ---
        // renderAttachment('https://via.placeholder.com/300', 'holiday_photo.jpg', 'image/jpeg');
        // renderAttachment('your_video.mp4', 'presentation_final.mp4', 'video/mp4');
    </script>
</body>
</html>
